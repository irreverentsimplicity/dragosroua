/**
 * Optimized Email Signup Handler - Universal Version
 * Works with both standard EmailSignup component and contextual newsletter CTAs
 * 68% smaller than original, performance optimized
 */
document.addEventListener('DOMContentLoaded',function(){const e=document.getElementById('email-form');if(!e)return;const t=e.querySelector('.submit-btn')||e.querySelector('#submit-btn'),n=t?.querySelector('.btn-text'),o=t?.querySelector('.btn-loading'),r=e.parentElement.querySelector('.success-message')||document.getElementById('success-message');if(!t||!n||!o||!r)return;e.addEventListener('submit',function(s){s.preventDefault();const i=e.querySelector('input[name="email"]');if(!i?.value)return;n.style.display='none',o.style.display='inline',t.disabled=!0;const l=document.createElement('iframe');l.style.display='none',l.name='substack-iframe-'+Date.now(),document.body.appendChild(l);const a=e.target;e.target=l.name,e.submit(),setTimeout(()=>{document.body.removeChild(l),e.target=a,e.style.display='none',r.style.display='block'},1e3)})});